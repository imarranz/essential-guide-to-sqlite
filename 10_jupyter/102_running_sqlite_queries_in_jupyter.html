<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Ibon MartÃ­nez-Arranz" /><link rel="canonical" href="https://github.com/imarranz/essential-guide-to-sqlite/10_jupyter/102_running_sqlite_queries_in_jupyter.html" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Running SQLite Queries in Jupyter - Essential Guide to SQLite</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/custom.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Running SQLite Queries in Jupyter";
        var mkdocs_page_input_path = "10_jupyter/102_running_sqlite_queries_in_jupyter.md";
        var mkdocs_page_url = "/imarranz/essential-guide-to-sqlite/10_jupyter/102_running_sqlite_queries_in_jupyter.html";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Essential Guide to SQLite
        </a>
        <div class="version">
          1.0
        </div><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Essential Guide to SQLite</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Introduction to SQLite</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../01_introduction/011_overview_of_sqlite.html">Overview of SQLite</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../01_introduction/012_key_features.html">Key Features</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../01_introduction/013_use_cases.html">Use Cases</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Installing SQLite</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../02_installing/021_installation_on_linux.html">Installation on Linux</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../02_installing/022_first_steps.html">First Steps</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Using SQLite in Command Line</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../03_command/031_launching_sqlite_console.html">Launching SQLite Console</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../03_command/032_basic_commands.html">Basic Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Introduction to the Northwind Database</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../04_northwind/041_overview_of_the_northwind_database.html">Overview of the Northwind Database</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../04_northwind/042_schema_and_relationships.html">Schema and Relationships</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Basic SQL Commands</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../05_basic/051_creating_tables.html">Creating Tables</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../05_basic/052_inserting_data.html">Inserting Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../05_basic/053_selecting_data.html">Selecting Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../05_basic/054_examples.html">Examples</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Advanced SQL Commands</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../06_advanced/061_updating_data.html">Updating Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../06_advanced/062_deleting_data.html">Deleting Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../06_advanced/063_using_where_clause.html">Using WHERE Clause</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../06_advanced/064_sorting_results_with_order_by.html">Sorting Results with ORDER BY</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../06_advanced/065_examples.html">Examples</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Complex Queries</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../07_complex/071_aggregate_functions.html">Aggregate Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../07_complex/072_grouping_results_with_group_by.html">Grouping Results with GROUP BY</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../07_complex/073_filtering_groups_with_having.html">Filtering Groups with HAVING</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../07_complex/074_examples.html">Examples</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Joins</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../08_joins/081_understanding_joins.html">Understanding Joins</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../08_joins/082_inner_join.html">Inner Join</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../08_joins/083_left_join.html">Left Join</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../08_joins/084_right_join.html">Right Join</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../08_joins/085_full_join.html">Full Join</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../08_joins/086_examples.html">Examples</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SQLite with Python</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../09_python/091_setting_up_sqlite_in_python.html">Setting Up SQLite in Python</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../09_python/092_performing_basic_operations.html">Performing Basic Operations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../09_python/093_handling_transactions.html">Handling Transactions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../09_python/094_error_handling.html">Error Handling</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../09_python/095_examples.html">Examples</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SQLite with Jupyter</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="101_installing_libraries.html">Installing Necessary Libraries</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="102_running_sqlite_queries_in_jupyter.html">Running SQLite Queries in Jupyter</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="103_visualizing_data_with_sqlite_and_pandas.html">Visualizing Data with SQLite and Pandas</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Additional Resources and Further Reading</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../11_resources/111_official_documentation.html">Official Documentation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../11_resources/112_community_resources.html">Community Resources</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../11_resources/113_books_and_tutorials.html">Books and Tutorials</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Essential Guide to SQLite</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
          <li>SQLite with Jupyter &raquo;</li>
      <li class="breadcrumb-item active">Running SQLite Queries in Jupyter</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/imarranz/essential-guide-to-sqlite/edit/main/book/10_jupyter/102_running_sqlite_queries_in_jupyter.md">Edit on imarranz/essential-guide-to-sqlite</a>
    </li>
  </ul>
    <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Breadcrumb Navigation">
        <a href="101_installing_libraries.html" class="btn btn-neutral float-left" title="Installing Necessary Libraries"><span class="icon icon-circle-arrow-left" aria-hidden="true"></span> Previous</a>
        <a href="103_visualizing_data_with_sqlite_and_pandas.html" class="btn btn-neutral float-right" title="Visualizing Data with SQLite and Pandas">Next <span class="icon icon-circle-arrow-right" aria-hidden="true"></span></a>
    </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div class="toc">
<ul>
<li><a href="#sqlite_with_jupyter">SQLite with Jupyter</a><ul>
<li><a href="#running_sqlite_queries_in_jupyter">Running SQLite Queries in Jupyter</a><ul>
<li><a href="#loading_the_sql_extension">Loading the SQL Extension</a></li>
<li><a href="#connecting_to_an_sqlite_database">Connecting to an SQLite Database</a></li>
<li><a href="#creating_tables">Creating Tables</a></li>
<li><a href="#inserting_data">Inserting Data</a></li>
<li><a href="#querying_data">Querying Data</a></li>
<li><a href="#using_pandas_for_data_analysis">Using Pandas for Data Analysis</a></li>
<li><a href="#visualizing_data_with_matplotlib">Visualizing Data with Matplotlib</a></li>
<li><a href="#example_full_workflow_in_jupyter_notebook">Example: Full Workflow in Jupyter Notebook</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<hr />
<h2 id="sqlite_with_jupyter">SQLite with Jupyter<a class="headerlink" href="#sqlite_with_jupyter" title="Permanent link">#</a></h2>
<h3 id="running_sqlite_queries_in_jupyter">Running SQLite Queries in Jupyter<a class="headerlink" href="#running_sqlite_queries_in_jupyter" title="Permanent link">#</a></h3>
<p>Using Jupyter Notebooks to run SQLite queries allows you to interactively explore and manipulate your data. This section will guide you through the process of running SQLite queries in Jupyter Notebooks, using the <code>ipython-sql</code> extension and Pythonâs <code>sqlite3</code> module.</p>
<h4 id="loading_the_sql_extension">Loading the SQL Extension<a class="headerlink" href="#loading_the_sql_extension" title="Permanent link">#</a></h4>
<p>The first step is to load the SQL extension, which allows you to use SQL magic commands within Jupyter Notebook cells.</p>
<p><strong>Code</strong>:</p>
<pre><code class="language-python"># Load the SQL extension
%load_ext sql
</code></pre>
<p>This command loads the <code>ipython-sql</code> extension, enabling the use of <code>%sql</code> magic commands to run SQL queries directly in the notebook.</p>
<h4 id="connecting_to_an_sqlite_database">Connecting to an SQLite Database<a class="headerlink" href="#connecting_to_an_sqlite_database" title="Permanent link">#</a></h4>
<p>You need to establish a connection to an SQLite database. This can be done using the <code>%sql</code> magic command with a connection string.</p>
<p><strong>Code</strong>:</p>
<pre><code class="language-python"># Connect to the SQLite database
%sql sqlite:///example.db
</code></pre>
<p>This command connects to the <code>example.db</code> SQLite database. If the database file does not exist, it will be created.</p>
<h4 id="creating_tables">Creating Tables<a class="headerlink" href="#creating_tables" title="Permanent link">#</a></h4>
<p>You can create tables by writing SQL queries in Jupyter Notebook cells.</p>
<p><strong>Code</strong>:</p>
<pre><code class="language-sql">%%sql

CREATE TABLE IF NOT EXISTS customers (
    CustomerID INTEGER PRIMARY KEY,
    CustomerName TEXT NOT NULL,
    ContactName TEXT,
    Country TEXT
);
</code></pre>
<p>This query creates a <code>customers</code> table with columns for <code>CustomerID</code>, <code>CustomerName</code>, <code>ContactName</code>, and <code>Country</code>.</p>
<h4 id="inserting_data">Inserting Data<a class="headerlink" href="#inserting_data" title="Permanent link">#</a></h4>
<p>To insert data into the table, you can use the <code>INSERT INTO</code> SQL command.</p>
<p><strong>Code</strong>:</p>
<pre><code class="language-sql">%%sql

INSERT INTO customers (CustomerName, ContactName, Country)
VALUES ('Alfreds Futterkiste', 'Maria Anders', 'Germany');
</code></pre>
<p>This query inserts a new record into the <code>customers</code> table.</p>
<h4 id="querying_data">Querying Data<a class="headerlink" href="#querying_data" title="Permanent link">#</a></h4>
<p>You can retrieve data from the table using the <code>SELECT</code> SQL command and display the results in the notebook.</p>
<p><strong>Code</strong>:</p>
<pre><code class="language-sql">%%sql

SELECT * FROM customers;
</code></pre>
<p>This query selects all records from the <code>customers</code> table and displays the results.</p>
<h4 id="using_pandas_for_data_analysis">Using Pandas for Data Analysis<a class="headerlink" href="#using_pandas_for_data_analysis" title="Permanent link">#</a></h4>
<p>For more advanced data analysis, you can use the <code>pandas</code> library to run SQL queries and load the results into a DataFrame.</p>
<p><strong>Code</strong>:</p>
<pre><code class="language-python">import pandas as pd
import sqlite3

# Connect to the SQLite database
conn = sqlite3.connect('example.db')

# Query the database and load the results into a DataFrame
df = pd.read_sql_query('SELECT * FROM customers', conn)

# Display the DataFrame
print(df)

# Close the connection
conn.close()
</code></pre>
<p>In this example, we connect to the <code>example.db</code> database, execute a SQL query to select all records from the <code>customers</code> table, and load the results into a <code>pandas</code> DataFrame for further analysis.</p>
<h4 id="visualizing_data_with_matplotlib">Visualizing Data with Matplotlib<a class="headerlink" href="#visualizing_data_with_matplotlib" title="Permanent link">#</a></h4>
<p>You can also visualize the data using the <code>matplotlib</code> library.</p>
<p><strong>Code</strong>:</p>
<pre><code class="language-python">import matplotlib.pyplot as plt

# Create a bar plot of the number of customers per country
df['Country'].value_counts().plot(kind='bar')

# Set the title and labels
plt.title('Number of Customers per Country')
plt.xlabel('Country')
plt.ylabel('Number of Customers')

# Show the plot
plt.show()
</code></pre>
<p>This example creates a bar plot showing the number of customers per country.</p>
<h4 id="example_full_workflow_in_jupyter_notebook">Example: Full Workflow in Jupyter Notebook<a class="headerlink" href="#example_full_workflow_in_jupyter_notebook" title="Permanent link">#</a></h4>
<p>Here is a complete example of setting up a Jupyter Notebook to create a table, insert data, query the data, and visualize the results.</p>
<p><strong>Step 1: Load the SQL extension</strong>:</p>
<pre><code class="language-python">%load_ext sql
</code></pre>
<p><strong>Step 2: Connect to the SQLite database</strong>:</p>
<pre><code class="language-python">%sql sqlite:///example.db
</code></pre>
<p><strong>Step 3: Create the <code>customers</code> table</strong>:</p>
<pre><code class="language-sql">%%sql

CREATE TABLE IF NOT EXISTS customers (
    CustomerID INTEGER PRIMARY KEY,
    CustomerName TEXT NOT NULL,
    ContactName TEXT,
    Country TEXT
);
</code></pre>
<p><strong>Step 4: Insert data into the <code>customers</code> table</strong>:</p>
<pre><code class="language-sql">%%sql

INSERT INTO customers (CustomerName, ContactName, Country)
VALUES ('Alfreds Futterkiste', 'Maria Anders', 'Germany');
</code></pre>
<p><strong>Step 5: Query the <code>customers</code> table</strong>:</p>
<pre><code class="language-sql">%%sql

SELECT * FROM customers;
</code></pre>
<p><strong>Step 6: Load the query results into a Pandas DataFrame</strong>:</p>
<pre><code class="language-python">import pandas as pd
import sqlite3

# Connect to the SQLite database
conn = sqlite3.connect('example.db')

# Query the database and load the results into a DataFrame
df = pd.read_sql_query('SELECT * FROM customers', conn)

# Display the DataFrame
print(df)

# Close the connection
conn.close()
</code></pre>
<p><strong>Step 7: Visualize the data with Matplotlib</strong>:</p>
<pre><code class="language-python">import matplotlib.pyplot as plt

# Create a bar plot of the number of customers per country
df['Country'].value_counts().plot(kind='bar')

# Set the title and labels
plt.title('Number of Customers per Country')
plt.xlabel('Country')
plt.ylabel('Number of Customers')

# Show the plot
plt.show()
</code></pre>
<p>By following these steps, you can efficiently run SQLite queries in Jupyter Notebooks, analyze the results with Pandas, and visualize the data using Matplotlib.</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p><b>Essential Guide to SQLite</b> <br>Copyright &#169; 2024 <a href="https://github.com/imarranz">Ibon MartÃ­nez-Arranz</a><br></p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="101_installing_libraries.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="103_visualizing_data_with_sqlite_and_pandas.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
