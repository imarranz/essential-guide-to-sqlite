<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Ibon MartÃ­nez-Arranz" /><link rel="canonical" href="https://github.com/imarranz/essential-guide-to-sqlite/09_python/094_error_handling.html" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Error Handling - Essential Guide to SQLite</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/custom.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Error Handling";
        var mkdocs_page_input_path = "09_python/094_error_handling.md";
        var mkdocs_page_url = "/imarranz/essential-guide-to-sqlite/09_python/094_error_handling.html";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Essential Guide to SQLite
        </a>
        <div class="version">
          1.0
        </div><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Essential Guide to SQLite</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Introduction to SQLite</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../01_introduction/011_overview_of_sqlite.html">Overview of SQLite</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../01_introduction/012_key_features.html">Key Features</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../01_introduction/013_use_cases.html">Use Cases</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Installing SQLite</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../02_installing/021_installation_on_linux.html">Installation on Linux</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../02_installing/022_first_steps.html">First Steps</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Using SQLite in Command Line</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../03_command/031_launching_sqlite_console.html">Launching SQLite Console</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../03_command/032_basic_commands.html">Basic Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Introduction to the Northwind Database</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../04_northwind/041_overview_of_the_northwind_database.html">Overview of the Northwind Database</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../04_northwind/042_schema_and_relationships.html">Schema and Relationships</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Basic SQL Commands</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../05_basic/051_creating_tables.html">Creating Tables</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../05_basic/052_inserting_data.html">Inserting Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../05_basic/053_selecting_data.html">Selecting Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../05_basic/054_examples.html">Examples</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Advanced SQL Commands</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../06_advanced/061_updating_data.html">Updating Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../06_advanced/062_deleting_data.html">Deleting Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../06_advanced/063_using_where_clause.html">Using WHERE Clause</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../06_advanced/064_sorting_results_with_order_by.html">Sorting Results with ORDER BY</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../06_advanced/065_examples.html">Examples</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Complex Queries</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../07_complex/071_aggregate_functions.html">Aggregate Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../07_complex/072_grouping_results_with_group_by.html">Grouping Results with GROUP BY</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../07_complex/073_filtering_groups_with_having.html">Filtering Groups with HAVING</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../07_complex/074_examples.html">Examples</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Joins</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../08_joins/081_understanding_joins.html">Understanding Joins</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../08_joins/082_inner_join.html">Inner Join</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../08_joins/083_left_join.html">Left Join</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../08_joins/084_right_join.html">Right Join</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../08_joins/085_full_join.html">Full Join</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../08_joins/086_examples.html">Examples</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SQLite with Python</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="091_setting_up_sqlite_in_python.html">Setting Up SQLite in Python</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="092_performing_basic_operations.html">Performing Basic Operations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="093_handling_transactions.html">Handling Transactions</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="094_error_handling.html">Error Handling</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="095_examples.html">Examples</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SQLite with Jupyter</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../10_jupyter/101_installing_libraries.html">Installing Necessary Libraries</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../10_jupyter/102_running_sqlite_queries_in_jupyter.html">Running SQLite Queries in Jupyter</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../10_jupyter/103_visualizing_data_with_sqlite_and_pandas.html">Visualizing Data with SQLite and Pandas</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Additional Resources and Further Reading</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../11_resources/111_official_documentation.html">Official Documentation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../11_resources/112_community_resources.html">Community Resources</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../11_resources/113_books_and_tutorials.html">Books and Tutorials</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Essential Guide to SQLite</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
          <li>SQLite with Python &raquo;</li>
      <li class="breadcrumb-item active">Error Handling</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/imarranz/essential-guide-to-sqlite/edit/master/docs/09_python/094_error_handling.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
    <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Breadcrumb Navigation">
        <a href="093_handling_transactions.html" class="btn btn-neutral float-left" title="Handling Transactions"><span class="icon icon-circle-arrow-left" aria-hidden="true"></span> Previous</a>
        <a href="095_examples.html" class="btn btn-neutral float-right" title="Examples">Next <span class="icon icon-circle-arrow-right" aria-hidden="true"></span></a>
    </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div class="toc">
<ul>
<li><a href="#sqlite_with_python">SQLite with Python</a><ul>
<li><a href="#error_handling">Error Handling</a><ul>
<li><a href="#common_sqlite_errors">Common SQLite Errors</a></li>
<li><a href="#catching_and_handling_errors">Catching and Handling Errors</a></li>
<li><a href="#logging_errors">Logging Errors</a></li>
<li><a href="#using_custom_error_messages">Using Custom Error Messages</a></li>
<li><a href="#using_context_managers_for_safe_transactions">Using Context Managers for Safe Transactions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<hr />
<h2 id="sqlite_with_python">SQLite with Python<a class="headerlink" href="#sqlite_with_python" title="Permanent link">#</a></h2>
<h3 id="error_handling">Error Handling<a class="headerlink" href="#error_handling" title="Permanent link">#</a></h3>
<p>When working with databases, it's essential to handle potential errors that may arise during database operations. Proper error handling ensures that your application can gracefully handle unexpected situations without crashing or corrupting the database. The <code>sqlite3</code> module in Python provides several exception classes to catch and manage errors effectively.</p>
<h4 id="common_sqlite_errors">Common SQLite Errors<a class="headerlink" href="#common_sqlite_errors" title="Permanent link">#</a></h4>
<p>Here are some common errors you might encounter when working with SQLite:</p>
<ul>
<li><strong>sqlite3.OperationalError</strong>: Raised for operational errors like trying to execute an invalid SQL statement or issues with the database connection.</li>
<li><strong>sqlite3.IntegrityError</strong>: Raised when a database integrity constraint (such as a foreign key or unique constraint) is violated.</li>
<li><strong>sqlite3.ProgrammingError</strong>: Raised for programming errors such as using the cursor incorrectly.</li>
<li><strong>sqlite3.DatabaseError</strong>: Raised for errors related to the database.</li>
<li><strong>sqlite3.Error</strong>: A base class for all SQLite-related errors.</li>
</ul>
<h4 id="catching_and_handling_errors">Catching and Handling Errors<a class="headerlink" href="#catching_and_handling_errors" title="Permanent link">#</a></h4>
<p>You can use try-except blocks to catch and handle errors. This approach ensures that your program can respond appropriately to various issues.</p>
<p><strong>Example</strong>:</p>
<pre><code class="language-python">import sqlite3

try:
    # Connect to the SQLite database
    conn = sqlite3.connect('example.db')

    # Create a cursor object
    cursor = conn.cursor()

    # Attempt to create a table with invalid SQL syntax
    cursor.execute('''
    CREATE TABLE customers (
        CustomerID INTEGER PRIMARY KEY,
        CustomerName TEXT NOT NULL,
        ContactName TEXT,
        Country TEXT
    ''')  # Missing closing parenthesis

    # Commit the changes
    conn.commit()

except sqlite3.OperationalError as e:
    print('OperationalError occurred:', e)

except sqlite3.IntegrityError as e:
    print('IntegrityError occurred:', e)

except sqlite3.ProgrammingError as e:
    print('ProgrammingError occurred:', e)

except sqlite3.DatabaseError as e:
    print('DatabaseError occurred:', e)

except sqlite3.Error as e:
    print('SQLite error occurred:', e)

finally:
    # Close the cursor and connection
    if cursor:
        cursor.close()
    if conn:
        conn.close()
</code></pre>
<p>In this example, we catch and handle various types of SQLite errors using specific exception classes. The <code>finally</code> block ensures that the cursor and connection are closed, even if an error occurs.</p>
<h4 id="logging_errors">Logging Errors<a class="headerlink" href="#logging_errors" title="Permanent link">#</a></h4>
<p>Logging errors is a good practice for debugging and maintaining your application. You can use Pythonâs built-in <code>logging</code> module to log error messages.</p>
<p><strong>Example</strong>:</p>
<pre><code class="language-python">import sqlite3
import logging

# Configure logging
logging.basicConfig(filename='app.log', level=logging.ERROR, format='%(asctime)s %(message)s')

try:
    # Connect to the SQLite database
    conn = sqlite3.connect('example.db')

    # Create a cursor object
    cursor = conn.cursor()

    # Attempt to insert a record with a duplicate primary key
    cursor.execute('''
    INSERT INTO customers (CustomerID, CustomerName, ContactName, Country)
    VALUES (1, 'Duplicate Customer', 'John Doe', 'USA')
    ''')

    # Commit the changes
    conn.commit()

except sqlite3.IntegrityError as e:
    logging.error('IntegrityError occurred: %s', e)

except sqlite3.Error as e:
    logging.error('SQLite error occurred: %s', e)

finally:
    # Close the cursor and connection
    if cursor:
        cursor.close()
    if conn:
        conn.close()
</code></pre>
<p>In this example, error messages are logged to a file named <code>app.log</code>, providing a record of errors that can be reviewed later.</p>
<h4 id="using_custom_error_messages">Using Custom Error Messages<a class="headerlink" href="#using_custom_error_messages" title="Permanent link">#</a></h4>
<p>You can provide custom error messages to make error handling more user-friendly and informative.</p>
<p><strong>Example</strong>:</p>
<pre><code class="language-python">import sqlite3

try:
    # Connect to the SQLite database
    conn = sqlite3.connect('example.db')

    # Create a cursor object
    cursor = conn.cursor()

    # Attempt to update a non-existent record
    cursor.execute('''
    UPDATE customers
    SET ContactName = 'Updated Name'
    WHERE CustomerID = 999
    ''')

    # Check if any row was updated
    if cursor.rowcount == 0:
        raise sqlite3.DatabaseError('No record found with the specified CustomerID.')

    # Commit the changes
    conn.commit()

except sqlite3.DatabaseError as e:
    print('DatabaseError occurred:', e)

except sqlite3.Error as e:
    print('SQLite error occurred:', e)

finally:
    # Close the cursor and connection
    if cursor:
        cursor.close()
    if conn:
        conn.close()
</code></pre>
<p>In this example, a custom error message is raised if no record is found with the specified <code>CustomerID</code>.</p>
<h4 id="using_context_managers_for_safe_transactions">Using Context Managers for Safe Transactions<a class="headerlink" href="#using_context_managers_for_safe_transactions" title="Permanent link">#</a></h4>
<p>Using context managers (<code>with</code> statements) helps ensure that transactions are committed or rolled back safely, reducing the risk of database corruption.</p>
<p><strong>Example</strong>:</p>
<pre><code class="language-python">import sqlite3

# Connect to the SQLite database
conn = sqlite3.connect('example.db')

try:
    with conn:
        # Create a cursor object
        cursor = conn.cursor()

        # Insert data into the 'customers' table
        cursor.execute('''
        INSERT INTO customers (CustomerName, ContactName, Country)
        VALUES ('New Customer', 'Jane Doe', 'USA')
        ''')

except sqlite3.Error as e:
    print('SQLite error occurred:', e)

finally:
    # Close the connection
    if conn:
        conn.close()
</code></pre>
<p>In this example, using <code>with conn:</code> ensures that if an error occurs within the block, the transaction is automatically rolled back. If no error occurs, the transaction is committed when the block is exited.</p>
<p>By implementing robust error handling practices, you can create more reliable and maintainable applications that gracefully handle unexpected situations and provide informative feedback to users.</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p><b>Essential Guide to SQLite</b> <br>Copyright &#169; 2024 <a href="https://github.com/imarranz">Ibon MartÃ­nez-Arranz</a><br></p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/imarranz/essential-guide-to-sqlite" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="093_handling_transactions.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="095_examples.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
